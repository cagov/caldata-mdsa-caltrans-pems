version: 2

models:
  - name: int_clearinghouse__station_meta
    description: |
      Vehicle detector station metadata from the [PeMS Clearinghouse feeds](https://pems.dot.ca.gov/feeds/clhouse/).
    columns:
      - name: META_DATE
        description: Date of the metadata file.
      - name: ID
        description: |
          An integer value that uniquely indenties the Station Metadata.
          Use this value to 'join' other clearinghouse files that contain Station Metadata
        tests:
          - not_null
      - name: ABSOLUTE_POSTMILE
        description: Absolute postmile value along a partilcuar state route where the VDS is located
      - name: STATE_POSTMILE
        description: State Postmile value
      - name: CITY
        description: The city number where the VDS is located, if available
      - name: COUNTY
        description: The unique number that identifies the county that contains a specific VDS within PeMS.
      - name: DIRECTION
        description: A string indicating the freeway direction of a specific VDS. Directions are N, E, S or W.
      - name: DISTRICT
        description: The district in which the VDS is located. Values are 1-12
      - name: FREEWAY
        description: The freeway where the VDS is located
      - name: LANES
        description: Total number of lanes for a specific VDS
      - name: LATITUDE
        description: Latitude of a specific VDS
      - name: LENGTH
        description: The length associated with a VDS
      - name: LONGITUDE
        description: Longitude of a specific VDS
      - name: NAME
        description: A descriptive name assocaited with a VDS
      - name: TYPE
        description: Two character string identify the VDS type
      - name: _VALID_FROM
        description: |
          The date that this metadata became valid. Should be the same as `META_DATE`.
          Finding the right metadata for a date should involve a check with
          `_VALID_FROM <= date < _VALID_TO`.
      - name: _VALID_TO
        description: |
          The date that this metadata became *invalid*.
          Finding the right metadata for a date should involve a check with
          `_VALID_FROM <= date < _VALID_TO`.
  - name: int_clearinghouse__station_status
    description: |
      TMDD Status data from PeMS Clearinghouse. This seems to be the main source of detector
      ID to station ID mapping.
    columns:
      - name: META_DATE
        description: The date of the XML metadata file
      - name: STATION_ID
        description: The station ID
      - name: DETECTOR_ID
        description: |
          The detector ID. In general, there can be several detectors for a single
          station, corresponding to different lanes of traffic.
      - name: DETECTOR_NAME
        description: The name of the detector
      - name: DETECTOR_STATUS
        description: |
          Detector status as reported by the XML file. Probably not useful when determining
          *actual* status of the detector.
      - name: LAST_UPDATE_TIME
        description: The last updated time. This seems to be empty for the whole dataset.
      - name: LANE_NUMBER
        description: |
          The lane number for the detector. This seems to be reported as
          1, 10, 100, 1000, 10000, etc for each successive lane, rather than counting up
          from one.
      - name: _VALID_FROM
        description: |
          The date that this metadata became valid. Should be the same as `META_DATE`.
          Finding the right metadata for a date should involve a check with
          `_VALID_FROM <= date < _VALID_TO`.
      - name: _VALID_TO
        description: |
          The date that this metadata became *invalid*.
          Finding the right metadata for a date should involve a check with
          `_VALID_FROM <= date < _VALID_TO`.
  - name: int_clearinghouse__most_recent_station_meta
    description: |
      Vehicle detector station metadata from the [PeMS Clearinghouse feeds](https://pems.dot.ca.gov/feeds/clhouse/).

      This table is restricted to the most recent update for each district, any prior metadata
      is ignored.
    columns:
      - name: META_DATE
        description: Date of the metadata file.
      - name: ID
        description: |
          An integer value that uniquely indenties the Station Metadata.
          Use this value to 'join' other clearinghouse files that contain Station Metadata
        tests:
          - not_null
      - name: ABSOLUTE_POSTMILE
        description: Absolute postmile value along a partilcuar state route where the VDS is located
      - name: STATE_POSTMILE
        description: State Postmile value
      - name: CITY
        description: The city number where the VDS is located, if available
      - name: COUNTY
        description: The unique number that identifies the county that contains a specific VDS within PeMS.
      - name: DIRECTION
        description: A string indicating the freeway direction of a specific VDS. Directions are N, E, S or W.
      - name: DISTRICT
        description: The district in which the VDS is located. Values are 1-12
      - name: FREEWAY
        description: The freeway where the VDS is located
      - name: LANES
        description: Total number of lanes for a specific VDS
      - name: LATITUDE
        description: Latitude of a specific VDS
      - name: LENGTH
        description: The length associated with a VDS
      - name: LONGITUDE
        description: Longitude of a specific VDS
      - name: NAME
        description: A descriptive name assocaited with a VDS
      - name: TYPE
        description: Two character string identify the VDS type
  - name: int_clearinghouse__most_recent_station_status
    description: |
      TMDD Status data from PeMS Clearinghouse. This seems to be the main source of detector
      ID to station ID mapping.

      This table is restricted to the most recent update for each district, any prior metadata
      is ignored.
    columns:
      - name: META_DATE
        description: The date of the XML metadata file
      - name: STATION_ID
        description: The station ID
      - name: DETECTOR_ID
        description: |
          The detector ID. In general, there can be several detectors for a single
          station, corresponding to different lanes of traffic.
      - name: DETECTOR_NAME
        description: The name of the detector
      - name: DETECTOR_STATUS
        description: |
          Detector status as reported by the XML file. Probably not useful when determining
          *actual* status of the detector.
      - name: LAST_UPDATE_TIME
        description: The last updated time. This seems to be empty for the whole dataset.
      - name: LANE_NUMBER
        description: |
          The lane number for the detector. This seems to be reported as
          1, 10, 100, 1000, 10000, etc for each successive lane, rather than counting up
          from one
  - name: int_clearinghouse__five_minute_station_agg
    description: |
      Raw 30 second sample data aggregated to the 5 minute level.
      Volume values are summed, occupancy is averaged.
    columns:
      - name: ID
        description: The station ID
      - name: SAMPLE_DATE
        description: The date on which the sample was taken
      - name: SAMPLE_TIMESTAMP
        description: The timestamp of the start for the 5 minute aggregated samples.
      - name: LANE
        description: |
          The lane number of the detector, starting from 1
      - name: VOLUME
        description: The sum of the flow values for a detector over the sample period.
      - name: OCCUPANCY
        description: The average of the occupancy values over the sample period.
      - name: SPEED
        description: |
          Preliminary speed calculation in miles/hour based on the simplified version
          of the speed formula located at
          https://pems.dot.ca.gov/Papers/vanzwet_gfactor.pdf
  - name: int_clearinghouse__active_stations
    description: |
      Contains station meta data for all stations that were designated active on any
      given day
  - name: int_clearinghouse__nearby_stations
    description: |
      Station pairs for stations that are upstream and downstream, as well as
      the same station. This can be used to compare values between neighboring
      detectors, both in different lanes in the same station, as well as in
      neighboring stations.
    columns:
      - name: ID
        description: The id of the first station in the pair.
      - name: OTHER_ID
        description: The id of the second station in the pair.
      - name: DIRECTION
        description: A string indicating the freeway direction of a specific VDS. Directions are N, E, S or W.
      - name: DISTRICT
        description: The district in which the VDS is located. Values are 1-12
      - name: FREEWAY
        description: The freeway where the VDS is located
      - name: TYPE
        description: Two character string identify the VDS type
      - name: DELTA_POSTMILE
        description: |
          The difference in absolute postmile between the two stations. A positive
          delta_postmile indicates that `other_id` is downstream (greater postmile)
          from id.
      - name: _VALID_FROM
        description: The date from which this neighbor relation holds
      - name: _VALID_TO
        description: The date to which this neighbor relation holds.
  - name: int_clearninghouse__station_temporal_hourly_agg
    description: |
      hourly aggregation of volume, occupancy and speed along with delays and lost productivity by
      each station regardless of lanes. This metrics will measure the hourly performance of the state
      highway system at the station level.This can be used for daily aggregation of PeMS performance
      metrics at the station level.
    columns:
      - name: ID
        description: |
          An integer value that uniquely indentifies a station.
          Use this value to 'join' other files or tables that contain the Station ID value.
      - name: LENGTH
        description: length of the station
      - name: TYPE
        description: Two character string identify the VDS type
      - name: DISTRICT
        description: The district in which the VDS is located. Values are 1-12
      - name: SAMPLE_HOUR
        description: the hour associated with hourly aggregated data samples.
      - name: SAMPLE_DATE
        description: The date associated with hourly aggregated data samples.
      - name: HOURLY_VOLUME
        description: The sum of the flow values for a detector over the sample period across the all lanes.
      - name: HOURLY_SPEED
        description: flow weighted houly speed across the all lanes
      - name: HOURLY_OCCUPANCY
        description: The average of the occupancy values over the sample period across the all lanes.
      - name: HOURLY_VMT
        description: |
          The sum of the miles of freeway driven by each vehicle in an hour and a given section of the
          freeway across the all lanes.
      - name: HOURLY_VHT
        description: |
          Vehicle Hours Travelled (VHT) is calculated over an hour and a
          given section of freeway. VHT is the amount of time spent by all of the
          vehicles on the freeway.
      - name: HOURLY_TTI
        description: |
          The Travel Time Index (TTI) is the ratio of the average travel time for all users
          across a region to the free-flow travel time. The free-flow travel time is taken
          to be the time to traverse the link when traveling at 60MPH. For loop-based
          performance measures, the TTI is simply the free-flow speed divided by the
          performance measure Q.
      - name: HOURLY_Q_VALUE
        description: |
          Q is the sum of the VMT in a spatial and temporal region divided by the sum of
          the VHT in the same region. For a single location its interpretation is the
          average speed.
      - name: DELAY
        description: |
          hourly delay for different threshold of congestion speed such as 35, 40, 45, 50, 55 and 60 mph
          across the all lanes.The Delay performance metric is the amount of additional time spent by the
           vehicles on a section of road due to congestion.
      - name: LOST_PRODUCTIVITY
        description: |
          This is the hourly lost productivity that is simply sum up the 12 five minutes
          lost productivity in an hour time period across the all lanes.The lost Productivity
          perfromance metric is the number of lane-mile-hours on the freeway lost due to operating
          under congested conditions instead of under free-flow conditions.
  - name: int_clearinghouse__station_temporal_daily_agg
    description: |
      daily aggregation of volume, occupancy and speed along with delays and lost productivity across
      all lanes of the station. This metrics will measure the daily performance of the state highway system.
      This can be used for weekly and monthly aggregation of PeMS performance metrics across all the lanes
      in a given station.
    columns:
      - name: ID
        description: |
          An integer value that uniquely indentifies a station.
          Use this value to 'join' other files or tables that contain the Station ID value.
      - name: LENGTH
        description: length of the station
      - name: TYPE
        description: Two character string identify the VDS type
      - name: DISTRICT
        description: The district in which the VDS is located. Values are 1-12
      - name: CITY
        description: The city number where the VDS is located, if available
      - name: COUNTY
        description: The unique number that identifies the county that contains a specific VDS within PeMS.
      - name: DIRECTION
        description: A string indicating the freeway direction of a specific VDS. Directions are N, E, S or W.
      - name: FREEWAY
        description: The freeway where the VDS is located
      - name: SAMPLE_DATE
        description: The date associated with daily aggregated data samples.
      - name: DAILY_VOLUME
        description: The sum of the flow values for a detector over the sample period across all the lanes.
      - name: DAILY_SPEED
        description: flow weighted daily speed across all the lanes
      - name: DAILY_OCCUPANCY
        description: The average of the occupancy values over the sample period across all the lanes.
      - name: DAILY_VMT
        description: |
          The sum of the miles of freeway driven by each vehicle in a given day and a given section of
           the freeway across all the lanes.
      - name: DAILY_VHT
        description: |
          Vehicle Hours Travelled (VHT) is calculated in a given day and a
          given section of freeway across all the lanes. VHT is the amount of time spent by all of the
          vehicles on the freeway in a given day.
      - name: DAILY_TTI
        description: |
          The Travel Time Index (TTI) is the ratio of the average travel time for all users
          across a region to the free-flow travel time. The free-flow travel time is taken
          to be the time to traverse the link when traveling at 60MPH. For loop-based
          performance measures, the TTI is simply the free-flow speed divided by the
          performance measure Q.
      - name: DAILY_Q_VALUE
        description: |
          Q is the sum of the VMT in a spatial and temporal region divided by the sum of
          the VHT in the same region in a given day across all the lanes. For a single location
          its interpretation is the
          average speed.
      - name: DELAY
        description: |
          daily delay for different threshold of congestion speed such as 35, 40, 45, 50, 55 and 60 mph
           across all the lanes.The Delay performance metric is the amount of additional time spent by the
           vehicles on a section of road due to congestion.
      - name: LOST_PRODUCTIVITY
        description: |
          This is the daily lost productivity that is simply sum up 24 hours
          lost productivity in a given day timeperiod across all the lanes.The lost Productivity
          perfromance metric is the number of lane-mile-days on the freeway lost due to operating under
           congested conditions instead of under free-flow conditions.
  - name: int_clearinghouse__station_temporal_weekly_agg
    description: |
      weekly aggregation of volume, speed and occupancy along with delays and lost productivity by
      across all lanes of the station. This metrics will measure the daily performance of the state
      highway system. This can be used to understand the SHS performance from week to week.
    columns:
      - name: ID
        description: |
          An integer value that uniquely indentifies a station.
          Use this value to 'join' other files or tables that contain the Station ID value.
      - name: LANE
        description: Lane associated with a route and station from five minutes performance metrics
      - name: TYPE
        description: Two character string identify the VDS type
      - name: LENGTH
        description: length of the station
      - name: DISTRICT
        description: The district in which the VDS is located. Values are 1-12
      - name: CITY
        description: The city number where the VDS is located, if available
      - name: COUNTY
        description: The unique number that identifies the county that contains a specific VDS within PeMS.
      - name: DIRECTION
        description: A string indicating the freeway direction of a specific VDS. Directions are N, E, S or W.
      - name: FREEWAY
        description: The freeway where the VDS is located
      - name: SAMPLE_WEEK
        description: The week associated with weekly aggregated data samples.
      - name: SAMPLE_WEEK_START_DATE
        description: the begining date of a sample week
      - name: WEEKLY_SPEED
        description: flow weighted weekly speed across all the lanes.
      - name: WEEKLY_VOLUME
        description:
          The sum of the flow values for a detector over the sample period
          across all the lanes.
      - name: WEEKLY_OCCUPANCY
        description: The average of the occupancy values over the sample period across all the lanes.
      - name: WEEKLY_VMT
        description: |
          The sum of the miles of freeway driven by each vehicle in a given week and a given section
          of the freeway across all the lanes.
      - name: WEEKLY_VHT
        description: |
          Vehicle Hours Travelled (VHT) is calculated in a given week and a
          given section of freeway across all the lanes. VHT is the amount of time spent by all of the
          vehicles on the freeway in a given week.
      - name: WEEKLY_TTI
        description: |
          The Travel Time Index (TTI) is the ratio of the average travel time for all users
          across a region to the free-flow travel time. The free-flow travel time is taken
          to be the time to traverse the link when traveling at 60MPH. For loop-based
          performance measures, the TTI is simply the free-flow speed divided by the
          performance measure Q.
      - name: WEEKLY_Q_VALUE
        description: |
          Q is the sum of the VMT in a spatial and temporal region divided by the sum of
          the VHT in the same region in a given week across all the lanes. For a single location
          its interpretation is the average speed.
      - name: DELAY
        description: |
          weekly delay for different threshold of congestion speed such as 35, 40, 45, 50, 55 and 60 mph
           across all the lanes.
          The Delay performance metric is the amount of additional time spent by the
           vehicles on a section of road due to congestion.
      - name: LOST_PRODUCTIVITY
        description: |
          This is the daily lost productivity that is simply sum up 7 days
          lost productivity in a given week timeperiod across all the lanes.
          The lost Productivity perfromance metric is the number of lane-mile-week
          on the freeway lost due to operating under congested conditions instead of
          under free-flow conditions.
  - name: int_clearinghouse__station_temporal_monthly_agg
    description: |
      monthly aggregation of volume,speed, and occupancy along with delays and lost productivity by
      across all lanes of the station. This metrics will measure the daily performance
      of the state highway system. This can be used to understand the SHS performance
      from month to month.
    columns:
      - name: ID
        description: |
          An integer value that uniquely indentifies a station.
          Use this value to 'join' other files or tables that contain the Station ID value.
      - name: LENGTH
        description: length of the station
      - name: TYPE
        description: Two character string identify the VDS type
      - name: DISTRICT
        description: The district in which the VDS is located. Values are 1-12
      - name: CITY
        description: The city number where the VDS is located, if available
      - name: COUNTY
        description: The unique number that identifies the county that contains a specific VDS within PeMS.
      - name: DIRECTION
        description: A string indicating the freeway direction of a specific VDS. Directions are N, E, S or W.
      - name: FREEWAY
        description: The freeway where the VDS is located
      - name: SAMPLE_MONTH
        description: The starting date of each month of the year
      - name: MONTHLY_SPEED
        description: flow weighted monthly speed across all the lanes.
      - name: MONTHLY_VOLUME
        description: The sum of the flow values for a detector over the sample period across all the lanes.
      - name: MONTHLY_OCCUPANCY
        description: The average of the occupancy values over the sample period across all the lanes.
      - name: MONTHLY_VMT
        description: |
          The sum of the miles of freeway driven by each vehicle in a given month of the year and
          a given section of the freeway across all the lanes.
      - name: MONTHLY_VHT
        description: |
          Vehicle Hours Travelled (VHT) is calculated in a given month of the year and a
          given section of freeway across all the lanes. VHT is the amount of time spent by all of the
          vehicles on the freeway in a given month of the year.
      - name: MONTHLY_TTI
        description: |
          The Travel Time Index (TTI) is the ratio of the average travel time for all users
          across a region to the free-flow travel time across all the lanes.
          The free-flow travel time is taken to be the time to traverse the link when traveling at 60MPH.
          For loop-based performance measures, the TTI is simply the free-flow speed divided by the
          performance measure Q.
      - name: MONTHLY_Q_VALUE
        description: |
          Q is the sum of the VMT in a spatial and temporal region divided by the sum of
          the VHT in the same region in a given month of the year across all the lanes.
          For a single location its interpretation is the average speed.
      - name: DELAY
        description: |
          monthly delay for different threshold of congestion speed such as 35, 40, 45, 50, 55 and 60 mph
          across all the lanes.
          The Delay performance metric is the amount of additional time spent by the
          vehicles on a section of road due to congestion.
      - name: LOST_PRODUCTIVITY
        description: |
          This is the monthly lost productivity that is simply sum up all days
          lost productivity in a given month of the year timeperiod across all the lanes.
          The lost Productivity perfromance metric is
          the number of lane-mile-month on the freeway lost due to operating under congested
          conditions instead of under free-flow conditions.
